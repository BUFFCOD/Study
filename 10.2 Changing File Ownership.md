Linux File Ownership, Permissions, and Special Bits



------------------------------------------------------------------------

1. File Ownership Basics

Every file and directory in Linux has:

-   Owner (user)
-   Group
-   Permissions for:
    -   Owner
    -   Group
    -   Others

Permission symbols: 
- r → read
- w → write
- x → execute
- o → no permission

Example:

    -rw-r--r--

Breakdown:
- rw- → owner can read & write
- r-- → group can read
- r-- → others can read

------------------------------------------------------------------------

2. Permissions on Files vs Directories

  ---------------------------------------------------------------------------
  Permission                 Files            Directories
  -------------------------- ---------------- -------------------------------
  Read (r)                   View file        List directory contents (ls)
                             contents         

  Write (w)                  Modify the file  Add, remove, or rename files
                                              inside

  Execute (x)                Run              Enter directory (cd), traverse
                             program/script   subdirs
  ---------------------------------------------------------------------------

Critical RHCSA rule

A user can delete a file even if they don’t own it as long as the
directory has:

-   write (w)
-   execute (x)

------------------------------------------------------------------------

3. Example Scenario

A root-owned file inside a user’s home:

    rootfile owned by root:root
    /home/linda is 700

Linda can delete the root-owned file because she has write+execute on
the directory.

------------------------------------------------------------------------

4. chmod: Modify Permissions

Absolute mode

    chmod 755 file
    chmod 640 file

Relative mode

    chmod +x file
    chmod g-w file
    chmod o+r file

------------------------------------------------------------------------

5. Recursive Permissions: x vs X

chmod -R x

Adds execute to everything.

chmod -R X

Adds execute only to: - directories
- executable files

Safe recursion:

    chmod -R X /path

------------------------------------------------------------------------

6. Default Permissions and umask

Defaults: - Files: 666 - Directories: 777

umask subtracts from these.

Example:

    umask 022 → files 644, directories 755
    umask 027 → files 640, directories 750

Locations: - /etc/bashrc - ~/.bashrc

------------------------------------------------------------------------

7. Shared Group Directories (SGID + Sticky Bit)

SGID

Makes new files inherit the directory’s group.

    chmod g+s /shared

Sticky Bit

Prevents users from deleting files they don’t own.

    chmod +t /shared

Combined:

    chmod 2770 /shared
    chmod 3770 /shared

------------------------------------------------------------------------

8. SUID (Set User ID)

Runs a program with the file owner’s privileges.

Example:

    -rwsr-xr-x  /usr/bin/passwd

⚠️ Never use SUID on scripts.

------------------------------------------------------------------------

9. Sticky Bit on Directories

Example: /tmp

    drwxrwxrwt

Set:

    chmod +t /dirname

------------------------------------------------------------------------

10. RHCSA Key Concepts

-   Directory permissions control deletion.
-   Use chmod -R X for safe recursion.
-   SGID ensures group inheritance.
-   Sticky bit protects shared directories.
-   SUID = elevated privileges.
-   umask only affects new files.
-   Check permissions using:

    ls -l
    ls -ld

------------------------------------------------------------------------

End of Notes