Linux Administration Notes: sudo & SSH

------------------------------------------------------------------------

üß© Managing sudo Configuration

Sudo privileges are managed through the main configuration file
/etc/sudoers.

  ‚ö†Ô∏è Important: Never edit /etc/sudoers directly. Always use the visudo
  command, which checks for syntax errors before saving changes.
  Incorrect syntax in this file can lock you out of admin privileges.

‚úÖ Recommended Practice

Instead of modifying /etc/sudoers directly, create drop-in configuration
files under:

    /etc/sudoers.d/

This method is safer and preserves your configuration during system
updates.

üßç Adding Users to the wheel Group

To grant a user administrative privileges (sudo access), add them to the
wheel group:

    sudo usermod -aG wheel <username>

‚öôÔ∏è Enabling Sudo Access for the Wheel Group

Ensure this line exists in /etc/sudoers:

    %wheel ALL=(ALL) ALL

This allows all users in the wheel group to execute commands as any user
(including root) using sudo.

üö´ Avoid Passwordless Sudo

Do not use the following configuration unless in a lab/testing
environment:

    %wheel ALL=(ALL) NOPASSWD: ALL

This removes password prompts for sudo, which is insecure and not
recommended for production or multi-user systems.

‚è≥ Adjusting Sudo Password Timeout

If you find it inconvenient to re-enter your password frequently, you
can extend the authentication timeout.
Create or edit a file in /etc/sudoers.d/ and add:

    Defaults    timestamp_type=global, timestamp_timeout=60

This keeps your sudo authentication valid for 60 minutes.

üéØ Granting Limited Sudo Access

You can also assign specific commands a user is allowed to run with
sudo. Example:

    lisa ALL=(ALL) /sbin/useradd, /usr/bin/passwd

This allows lisa to manage users and passwords, but not run other
administrative commands.

------------------------------------------------------------------------

üîí Using Secure Shell (SSH)

Checking SSH Status

To verify if the SSH service (sshd) is running:

    sudo systemctl status sshd

If SSH is not active, enable and start it:

    sudo systemctl enable sshd --now

Connecting to a Remote Server

To connect using SSH, you need the IP address of the remote machine.
View your IP address with:

    ip a

To connect as your current user:

    ssh <remote_IP_address>

To connect as a specific user:

    ssh <username>@<remote_IP_address>

Running Commands Remotely

You can run a single command on the remote server without starting an
interactive session:

    ssh <username>@<remote_IP_address> "<command>"

Example:

    ssh sysadmin@10.0.0.5 "uptime"

------------------------------------------------------------------------

üìÅ Copying Files Securely (SCP)

scp (Secure Copy) is a secure way to transfer files between systems over
SSH.

Copy from Local to Remote

    scp /path/to/local_file username@remote_host:/path/to/remote_directory

Copy from Remote to Local

    scp username@remote_host:/path/to/remote_file /path/to/local_directory

  üîë Tip: Since scp uses SSH, you must have SSH access to the remote
  host for it to work.

------------------------------------------------------------------------

‚úÖ Summary

-   Use visudo ‚Äî never edit /etc/sudoers directly.
-   Manage sudo users through /etc/sudoers.d/ and the wheel group.
-   Keep passwordless sudo disabled for security.
-   Use SSH for secure remote management and scp for secure file
    transfers.

------------------------------------------------------------------------

End of Notes