# User and Group Management Notes

---

## Temporarily Lock User Accounts

To **lock a user account**, use:
```bash
usermod -L <username>
```

To **unlock a user account**, use:
```bash
usermod -U <username>
```

---

## Set Account Expiration

You can set an account to **expire on a specific date**:
```bash
usermod -e 2020-01-12 bill
```
➡️ This means *Bill’s account will expire on January 12, 2020.*

---

## Disable Login for Service Accounts

For accounts that **should not be used for login** (e.g., application or service accounts), set the shell to `/sbin/nologin`:
```bash
usermod -s /sbin/nologin myapp
```
✅ This is typically used for **application or daemon accounts**.

---

## 9.6 Managing Group Membership

### Primary Group
- Managed through `/etc/passwd`.
- When a user creates a file, their **primary group** becomes the **group owner**.

### Secondary Groups
- Used to give users **additional permissions or features**.
- Managed through `/etc/group`.

### Temporary Group Change
Temporarily set your primary group using:
```bash
newgrp <groupname>
```

Check your group membership with:
```bash
id
```

### Group Management Commands
Create a new group:
```bash
groupadd <groupname>
```

Add a user to a group:
```bash
usermod -aG <groupname> <username>
```

Remove a user from a group:
```bash
gpasswd -d <username> <groupname>
```

List all groups:
```bash
getent group
```

---

## 9.8 Managing Password Properties

- Password hashes are stored in `/etc/shadow`.
- Each hash string includes:
  - **Hash algorithm**
  - **Random salt**
  - **Encrypted password hash**

### Password Configuration Files
- Basic password requirements are set in:
  ```
  /etc/login.defs
  ```
- For more advanced password policies, use **PAM (Pluggable Authentication Modules)**.

### Changing Passwords
Change the password of the **current user**:
```bash
passwd
```

Change password properties (as root):
```bash
chage <username>
```

### Useful chage Options
- `-l <username>` → List account aging information.
- `-M <days>` → Set maximum password age.
- `-m <days>` → Set minimum password age.
- `-W <days>` → Set warning days before expiration.

---

## RHCSA Quick Summary

| Task | Command | Notes |
|------|----------|-------|
| Lock user | `usermod -L <user>` | Prevent login |
| Unlock user | `usermod -U <user>` | Re-enable account |
| Set expiration date | `usermod -e YYYY-MM-DD <user>` | Auto-disable after date |
| Disable login shell | `usermod -s /sbin/nologin <user>` | For services only |
| Create group | `groupadd <group>` | Adds new group |
| Add user to group | `usermod -aG <group> <user>` | Append secondary group |
| Remove user from group | `gpasswd -d <user> <group>` | Useful cleanup |
| View user info | `id <user>` | Show UID/GID info |
| View group info | `getent group` | Show all groups |
| Change password | `passwd <user>` | As root |
| View password aging | `chage -l <user>` | Show expiration info |

---

**Tip:** Always test your changes with `id`, `getent`, or by checking `/etc/passwd`, `/etc/group`, and `/etc/shadow`.  
**Remember:** Locked accounts can’t authenticate, but their files and permissions remain intact.
