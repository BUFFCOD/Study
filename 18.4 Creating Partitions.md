
fdisk is the recommended utility abd gas been around since the earlisted linux versions.

Offer easy access to advanced partitioning features.

COmpletely reworked to support MBR and GPT partitioning schemes.

on new disk create a GPT partition table using option g ; it creates an MBR partition table by default.


gdisk was introduced to provide GPT support only but is no loger is installed by default.

parted is a more advanced partitioning tool that supports both MBR and GPT partitioning schemes.



A partition type is a low level identifier of the operating system filesystem, and boot manager using a specific partition.

Partition types were important in the past currently most partitions will work if the wrong partition type is set.

in fdisk use the t command to change the partition type.

use Aliases to set the apporpriate partition type.

linux: standard linux filesystem
linux swap: linux swap partition
lvm: linux lvm partition
uefi: efi system partition

other partitons type are using l option for listing all partition types.

```bash 
fdisk /dev/sdb
```


## creating and Mounting Filesystems

XFS is the default filesystem in RHEL.

fast and scalable journaling filesystem.

Uses CoW (Copy on Write) to ensure data integrity.

sizee can be increased not decreased.

ext4 is the default in RHEL 6 and is still available.

backward compatible with ext3 and ext2.

uses journal to guarantee data integrity

size can be increased and decreased.

vfat offes multiplatform compatibility.
commonly used for UEFI system partitions.

btrfs is a modern filesystem with advanced features like snapshots and checksums.
suitable for specific use cases like container storage.

to create a filesystem use the mkfs command followed by the filesystem type.

```bash 
mkfs.xfs /dev/sdb1 creates an XFS filesystem on /dev/sdb1
mkfs.ext4 /dev/sdb2 creates an ext4 filesystem on /dev/sdb2
mkfs.vfat /dev/sdb3 creates a vfat filesystem on /dev/sdb3
```

after creating a filesystem mount it using the mount command.

```bash
mount /dev/sdb1 /mnt
```
use unmount to unmount the filesystem.

```bash
umount /mnt
```
use lsof /mnt if you get an error about the device being busy to see which processes are using the mount point.

the mount command shows all mounted filesystems includeing administrative kernels mounts.

findmnt command show which filesystem is mounted where in the direcorty structure.

lsblk is probably the most convenient way to get an overview of which partitions are mounted where.

```bash

## Understanding /etc/fstab

/etc/fstab is the main configuration file to persistently mount partitions

/dev/nvme0n1p1 /data ext4 defaults 0 0

/etc/ content is used to generate systemd mount by the systemd-fstab-generator utility during system boot.

to update systemd mount it is recommended to use systemctl daemon-reload after modifying /etc/fstab

if an error was found in /etc/fstab, your system will drop a troubleshooting shell during boot.

After adding line to /etc/fstab use the mount -a command  to mount all that are not yet mounted.

alternatively use findmnt --verify to check for errors in /etc/fstab without mounting anything.



In datacenter environments  block device name many change 
different solutions exist for persistent nameing like UUIDs and labels.

UUIDs: a UUID is automatically genterated for each device that contains a filesystem or anything  similar.

Label: while creating the filesystem the option -L can be used to set an arbitrary name that can be used for mounting the filesystem.

Unique device names are created in /dev/disk/*


blkid shows all devices with name attributes like UUID and label.

tune2fs -L is used to set or change the label of an ext2/3/4 filesystem.

mkfs.* -L is used to set the label while creating a filesystem.


## Define Systemd Mount 

lines in /etc/fstab are converted to systemd mount units during boot.

check .run/systemd/generator/ for the automatically generated files.

Mounts can be created using systemd .mount files.

Using .mount files allows you to be more specific in defining dependencies

Use systemctl cat tmp.mount to see the content of an automatically generated mount unit.


Swap is RAM that is emulated on disk.

All linux systems should have some swap space.

if there is a memory shortage unused application memeory can be moved to swap space.
the the amount of swap depends on the use of the server.

swap can be created on any block device including swap files.
set partition type to linux swap using fdisk.
after creating the swap partition use the mkswap command to initialize the swap space.

activate the swap space using the swapon command.

```bash
mkswap /dev/sdb2
swapon /dev/sdb2