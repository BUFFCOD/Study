# ps Command & System Monitoring (Linux)

---

## ps Command Syntax Styles

The `ps` command has two different syntax styles:

* **UNIX style** → uses a hyphen (`-`) before options
* **BSD style** → does not use a hyphen

Both styles can be combined in a single command.

### Commonly Used ps Options

```bash
ps -e               # Lists all processes running on the system (UNIX style)
ps aux             # Lists all processes with detailed information (BSD style)
ps -ef             # Lists all processes with full-format listing (UNIX style)
ps -u <username>   # Lists processes owned by a specific user (UNIX style)
ps -p <pid>        # Displays information about a specific process by PID (UNIX style)
ps -C <command>    # Displays information about processes with a specific command name (UNIX style)
```

> Therefore `ps L` and `ps -L` are two different commands.

`ps` shows an overview of current processes.

Use:

```bash
ps aux
```

for an overview of all processes.

---

## Example Output: ps aux

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME   COMMAND
root         1  0.0  0.1 225280  8484 ?        Ss   Jun01   0:04   /usr/lib/systemd/systemd --switched-root --system --deserialize 22
root         2  0.0  0.0      0     0 ?        S    Jun01   0:00   [kthreadd]
root         3  0.0  0.0      0     0 ?        I<   Jun01   0:00   [rcu_gp]
root         4  0.0  0.0      0     0 ?        I<   Jun01   0:00   [rcu_par_gp]
...
```

---

## Tree View of Processes

```bash
ps fax
```

Displays processes in a hierarchical (tree) view.

### Example Output

```
  PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:04 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
    2 ?        S      0:00 [kthreadd]
    3 ?        I<     0:00  \_ [rcu_gp]
    4 ?        I<     0:00  \_ [rcu_par_gp]
    6 ?        I<     0:00  \_ [kworker/0:0H-kblockd]
...
```

---

## Custom Output & Sorting

```bash
ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem
```

Shows a custom output with specific columns and sorts by memory usage (highest first).

### Example Output

```
  PID  PPID CMD                            %MEM %CPU
 3456     1 /usr/bin/python3 myscript.py   2.5  15.0
 2345     1 /usr/lib/firefox/firefox       1.8   8.0
 1234     1 /usr/bin/java -jar myapp.jar    1.2   5.0
```

---

# Monitoring Memory Usage

Linux places as many files as possible into cache to speed up access times.
For this reason, Linux memory is often shown as saturated (used), even when sufficient free memory exists.

### Swap

* Swap is used as an overflow area when physical memory is full.
* The Linux kernel moves inactive application memory to swap first.
* Inactive cache memory will be dropped when needed.

To view memory and swap usage in MB:

```bash
free -m
```

---

## Write Cache & Disk Sync

While writing files, a write cache is used to buffer write operations. This write cache is periodically committed to disk.

* `pdflush` (or modern equivalents like `flush-*`) are kernel threads that handle writing dirty pages to disk.
* After committing a file write, it is **not immediately secure**.

To ensure files are committed to disk immediately:

```bash
sync
```

---

# CPU Load Monitoring

CPU load is checked using:

```bash
uptime
```

CPU load is expressed as the average number of processes over the last:

* 1 minute
* 5 minutes
* 15 minutes

These processes are either:

* Runnable
* In uninterruptible state

### Rule of Thumb

The load average should not exceed the number of CPU cores in the system.

Example:

* 4-core system → Load should ideally stay under 4.00
* 8-core system → Load should ideally stay under 8.00

---

# Quick Summary

* `ps aux` → Full process overview
* `ps fax` → Process tree view
* `ps -eo ... --sort` → Custom formatted output
* `free -m` → Memory and swap usage
* `sync` → Force disk writes
* `uptime` → CPU load averages

Efficient monitoring helps identify performance bottlenecks before they become critical.
